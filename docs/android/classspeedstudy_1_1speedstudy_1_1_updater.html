<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Speed Study: speedstudy.speedstudy.Updater Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Speed Study
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classspeedstudy_1_1speedstudy_1_1_updater.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classspeedstudy_1_1speedstudy_1_1_updater-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">speedstudy.speedstudy.Updater Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Inherits AsyncTask&lt; Void, Void, Integer &gt;.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba2687d6d66ebf8f90d96a375424d4ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba2687d6d66ebf8f90d96a375424d4ee"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Updater</b> (Context c)</td></tr>
<tr class="separator:aba2687d6d66ebf8f90d96a375424d4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e3e50c0a57a4dc8add2bf5f38ce0b4"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#aa3e3e50c0a57a4dc8add2bf5f38ce0b4">newerFile</a> (String d1, String d2)</td></tr>
<tr class="separator:aa3e3e50c0a57a4dc8add2bf5f38ce0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf9d671a6be47fa04c76cc4bd967b56"><td class="memItemLeft" align="right" valign="top">ArrayList&lt; JSONObject &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#aacf9d671a6be47fa04c76cc4bd967b56">readUserFiles</a> ()</td></tr>
<tr class="separator:aacf9d671a6be47fa04c76cc4bd967b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed94d07dddf5374b892260b25e80847b"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#aed94d07dddf5374b892260b25e80847b">run</a> (OkHttpClient client, String token, <a class="el" href="classspeedstudy_1_1speedstudy_1_1_error.html">Error</a> e)  throws Exception </td></tr>
<tr class="separator:aed94d07dddf5374b892260b25e80847b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d2c6cca7fc9a11dc865c9aec9c543e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#a22d2c6cca7fc9a11dc865c9aec9c543e">performUpdateJson</a> (ArrayList&lt; JSONObject &gt; files)</td></tr>
<tr class="separator:a22d2c6cca7fc9a11dc865c9aec9c543e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a705de23bef73f3497ac5c4076afc4177"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#a705de23bef73f3497ac5c4076afc4177">modifyFileListJson</a> (ArrayList&lt; JSONObject &gt; serverFiles, ArrayList&lt; JSONObject &gt; localFiles)</td></tr>
<tr class="separator:a705de23bef73f3497ac5c4076afc4177"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972f66800e398801acd7f121274df30c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#a972f66800e398801acd7f121274df30c">updateFilesListJson</a> (ArrayList&lt; JSONObject &gt; newFiles, ArrayList&lt; JSONObject &gt; oldFiles)</td></tr>
<tr class="separator:a972f66800e398801acd7f121274df30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad36165dcf5647748144ff86b60fc6a00"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad36165dcf5647748144ff86b60fc6a00"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>onPreExecute</b> ()</td></tr>
<tr class="separator:ad36165dcf5647748144ff86b60fc6a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a351ab332c16d7f5a0123c8c904885b20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#a351ab332c16d7f5a0123c8c904885b20">onPostExecute</a> (Integer result)</td></tr>
<tr class="separator:a351ab332c16d7f5a0123c8c904885b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5775bd3862449471f68fecb33ec474"><td class="memItemLeft" align="right" valign="top">Integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html#a0f5775bd3862449471f68fecb33ec474">doInBackground</a> (Void...params)</td></tr>
<tr class="separator:a0f5775bd3862449471f68fecb33ec474"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Make's use of Squareup's OkHttp to connect to the server. This opensource software is used to form the requests to the server as well as handle the response. Grabs all the users files from the server, and compares their date last modified with the date of the files saved locally, and updates all the files that were more recently updated on the server. Also updates a file containing information about all the users locally stored documents. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0f5775bd3862449471f68fecb33ec474"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Integer speedstudy.speedstudy.Updater.doInBackground </td>
          <td>(</td>
          <td class="paramtype">Void...&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executes the updaate process, which involves retrieving all of the users documents from the server, checking to see which local files need to be updated, and updating the required files. Does not run on the UI thread. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="classspeedstudy_1_1speedstudy_1_1_error.html">Error</a> code as an integer, sent to onPostExecute </dd></dl>

</div>
</div>
<a class="anchor" id="a705de23bef73f3497ac5c4076afc4177"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void speedstudy.speedstudy.Updater.modifyFileListJson </td>
          <td>(</td>
          <td class="paramtype">ArrayList&lt; JSONObject &gt;&#160;</td>
          <td class="paramname"><em>serverFiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; JSONObject &gt;&#160;</td>
          <td class="paramname"><em>localFiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compares local files and files from the server, determining which files need to be updates. The files to be updated will be the files remaining in serverFiles. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serverFiles</td><td>- All files from the server as an ArrayList of JSONObjects. </td></tr>
    <tr><td class="paramname">localFiles</td><td>- All local file information as an ArrayList of JSONObjects. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa3e3e50c0a57a4dc8add2bf5f38ce0b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean speedstudy.speedstudy.Updater.newerFile </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>d2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compares to dates to see if the first is newer, used to check which files need to be updated. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d1</td><td>- The first date as a string </td></tr>
    <tr><td class="paramname">d2</td><td>- The second date as a string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean indicating if the first date is more recent then the second date. </dd></dl>

</div>
</div>
<a class="anchor" id="a351ab332c16d7f5a0123c8c904885b20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void speedstudy.speedstudy.Updater.onPostExecute </td>
          <td>(</td>
          <td class="paramtype">Integer&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the update has finished executing, running on the UI thread. Sets information for menu options. Prompts errors if the login fails. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>- error code from update process </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a22d2c6cca7fc9a11dc865c9aec9c543e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void speedstudy.speedstudy.Updater.performUpdateJson </td>
          <td>(</td>
          <td class="paramtype">ArrayList&lt; JSONObject &gt;&#160;</td>
          <td class="paramname"><em>files</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates local files with data retrieved from the server. Writes new files if required. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">files</td><td>- ArrayList of JSONObjects with the data to be written. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aacf9d671a6be47fa04c76cc4bd967b56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ArrayList&lt;JSONObject&gt; speedstudy.speedstudy.Updater.readUserFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the users information file and creates an ArrayList of JSONObjects of it. </p><dl class="section return"><dt>Returns</dt><dd>An ArrayList of JSONObjects containing infromation on all the user's files saved locally. </dd></dl>

</div>
</div>
<a class="anchor" id="aed94d07dddf5374b892260b25e80847b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String speedstudy.speedstudy.Updater.run </td>
          <td>(</td>
          <td class="paramtype">OkHttpClient&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_error.html">Error</a>&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests the users files from the server. Uses an OkHttpClient to form the request and response. Will set e to any error, to pass it back to doInBackground where it will be delt with. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>- The OkHttpClient to be used for the request </td></tr>
    <tr><td class="paramname">token</td><td>- The users current login token </td></tr>
    <tr><td class="paramname">e</td><td>- Any error will be stored in this class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string that the server responds with. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a972f66800e398801acd7f121274df30c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void speedstudy.speedstudy.Updater.updateFilesListJson </td>
          <td>(</td>
          <td class="paramtype">ArrayList&lt; JSONObject &gt;&#160;</td>
          <td class="paramname"><em>newFiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ArrayList&lt; JSONObject &gt;&#160;</td>
          <td class="paramname"><em>oldFiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the information about locally stored files </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newFiles</td><td>- List of files that were updated. </td></tr>
    <tr><td class="paramname">oldFiles</td><td>- List of files that were not updated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>speedstudy/speedstudy/Updater.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>speedstudy</b></li><li class="navelem"><b>speedstudy</b></li><li class="navelem"><a class="el" href="classspeedstudy_1_1speedstudy_1_1_updater.html">Updater</a></li>
    <li class="footer">Generated on Fri Feb 27 2015 00:36:07 for Speed Study by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
